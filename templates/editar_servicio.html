{% extends "base.html" %}

{% block title %}Editar Servicio{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-warning">
                <h4 class="mb-0"><i class="bi bi-pencil"></i> Editar Servicio</h4>
            </div>
            <div class="card-body p-4">
                <form method="POST">
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre del Servicio *</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" 
                               value="{{ servicio.nombre }}" required>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="dia_vencimiento" class="form-label">Día de Vencimiento</label>
                            <input type="number" class="form-control" id="dia_vencimiento" name="dia_vencimiento" 
                                   min="1" max="31" value="{{ servicio.dia_vencimiento or '' }}">
                            <small class="text-muted">Día del mes en que vence</small>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label for="monto" class="form-label">Monto</label>
                            <input type="number" step="0.01" class="form-control" id="monto" name="monto" 
                                   value="{{ servicio.monto or '' }}">
                            <small class="text-muted">Dejalo vacío si varía cada mes</small>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="medio_pago" class="form-label">Medio de Pago</label>
                        <input type="text" class="form-control" id="medio_pago" name="medio_pago"
                               value="{{ servicio.medio_pago or '' }}">
                        <small class="text-muted">Opcional - para recordar cómo pagás</small>
                    </div>

                    <div class="mb-3">
                        <label for="categoria_id" class="form-label">Categoría</label>
                        <select class="form-select" id="categoria_id" name="categoria_id">
                            <option value="">Sin categoría</option>
                            {% for categoria in categorias %}
                            <option value="{{ categoria.id }}" {% if servicio.categoria_id == categoria.id %}selected{% endif %}>
                                {{ categoria.nombre }}
                            </option>
                            {% endfor %}
                        </select>
                        <small class="text-muted">Opcional - para organizar tus servicios</small>
                    </div>

                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="es_unico" name="es_unico" {% if servicio.es_unico %}checked{% endif %}>
                        <label class="form-check-label" for="es_unico">
                            <strong>Pago único</strong> (se desactivará automáticamente después de pagar)
                        </label>
                        <small class="text-muted d-block">Usá esto para gastos que no se repiten mensualmente</small>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-warning">
                            <i class="bi bi-save"></i> Actualizar Servicio
                        </button>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                            <i class="bi bi-x-circle"></i> Cancelar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
